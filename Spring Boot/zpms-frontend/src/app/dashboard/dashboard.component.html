
<div class="dashboard-container" >
  <h2 style="text-align: center;">डॅशबोर्ड</h2>

  <div class="filter-section">
    <label>
      From Date:
      <input type="date" [(ngModel)]="fromDate" />
    </label>
    <label>
      To Date:
      <input type="date" [(ngModel)]="toDate" />
    </label>
    <button (click)="applyDateRange()">Apply Date Range</button>
    <button (click)="resetFilters()">Reset Filters</button>
  </div>

  <div class="cards-section m-4">
    <div class="card blue">
      <h3>एकूण उद्दिष्ट <span>{{ totalTarget }}</span></h3>
      <div class="card-details">
        <div>अंगणवाडी: {{ totalData.anganwadi }}</div>
        <div>शाळा: {{ totalData.school }}</div>
        <div>आरोग्य: {{ totalData.health }}</div>
      </div>
    </div>

    <div class="card orange">
      <h3>आजचे उद्दिष्ट <span>{{ todayTarget }}</span></h3>
      <div class="card-details">
        <div>अंगणवाडी: {{ todayData.anganwadi }}</div>
        <div>शाळा: {{ todayData.school }}</div>
        <div>आरोग्य: {{ todayData.health }}</div>
      </div>
    </div>

    <div class="card green">
      <h3>पूर्ण उद्दिष्ट <span>{{ completedTarget }}</span></h3>
      <div class="card-details">
        <div>अंगणवाडी: {{ completedData.anganwadi }}</div>
        <div>शाळा: {{ completedData.school }}</div>
        <div>आरोग्य: {{ completedData.health }}</div>
      </div>
    </div>

    <div class="card lightblue">
      <h3>येणाऱ्या उद्दिष्ट</h3>
      <div class="card-details">
        <!-- Optional data here -->
      </div>
    </div>
  </div>
</div>


  <!-- First Row of Charts (Visits) -->
  <div class="row g-4 mt-4" *ngIf="isBrowser"  >
    <!-- Left Chart: Taluka Visits -->
    <div class="col-md-6">
      <div class="chart-container">
        <div class="mb-3">
          <label for="taluka-filter-visits" class="form-label">तालुका निवडा:</label>
          <select class="form-select" id="taluka-filter-visits" [(ngModel)]="selectedTaluka" (ngModelChange)="onTalukaChange()">
            <option *ngFor="let taluka of talukaOptions" [value]="taluka">{{ taluka }}</option>
          </select>
        </div>
        <h5 class="chart-title">निवडलेल्या तालुक्यामधील भेटींचा आढावा</h5>
        <div style="display: block; height: 300px;">
          <canvas baseChart
            [data]="talukaVisitsChartData"
            [options]="talukaVisitsChartOptions"
            [type]="barChartType">
          </canvas>
        </div>
      </div>
    </div>
    <!-- Right Chart: Monthly Visits -->
    <div class="col-md-6">
      <div class="chart-container">
        <div class="mb-3">
          <label for="month-filter" class="form-label">महिना निवडा:</label>
          <input type="text" class="form-control" id="month-filter" placeholder="उदा. जानेवारी, २०२३" [(ngModel)]="selectedMonth" (ngModelChange)="onMonthChange()">
        </div>
        <h5 class="chart-title">निवडलेल्या महिन्यातील भेटींचा आढावा</h5>
        <div style="display: block; height: 300px;">
          <canvas baseChart
            [data]="monthlyVisitsChartData"
            [options]="monthlyVisitsChartOptions"
            [type]="barChartType">
          </canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Second Row of Charts (Anganwadi Details) -->
  <div class="row g-4 mt-4" *ngIf="isBrowser"  >
    <!-- Left Chart: Anganwadi Building Type (Pie) -->
    <div class="col-md-6">
      <div class="chart-container">
        <div class="mb-3">
          <label for="taluka-filter-anganwadi" class="form-label">तालुका निवडा:</label>
          <select class="form-select" id="taluka-filter-anganwadi" [(ngModel)]="selectedTaluka" (ngModelChange)="onTalukaChange()">
            <option *ngFor="let taluka of talukaOptions" [value]="taluka">{{ taluka }}</option>
          </select>
        </div>
        <h5 class="chart-title">अंगणवाडी इमारत प्रकार: {{ selectedTaluka }} तालुके</h5>
        <div style="display: block; height: 350px;"> <!-- Adjusted height for pie chart + legend -->
          <canvas baseChart
            [data]="buildingTypePieChartData"
            [options]="buildingTypePieChartOptions"
            [type]="buildingTypePieChartType"
            [plugins]="buildingTypePieChartPlugins">
          </canvas>
        </div>
      </div>
    </div>

    <!-- Right Chart: Anganwadi Facilities (Bar) -->
    <div class="col-md-6">
      <div class="chart-container">
        <div class="mb-3">
          <label for="taluka-filter-facilities" class="form-label">तालुका निवडा:</label> <!-- Assuming same taluka filter applies -->
          <select class="form-select" id="taluka-filter-facilities" [(ngModel)]="selectedTaluka" (ngModelChange)="onTalukaChange()">
            <option *ngFor="let taluka of talukaOptions" [value]="taluka">{{ taluka }}</option>
          </select>
        </div>
        <h5 class="chart-title">अंगणवाडी सोई सुविधा - {{ selectedTaluka }} तालुके</h5>
        <div style="display: block; height: 350px;">
          <canvas baseChart
            [data]="facilityBarChartData"
            [options]="facilityBarChartOptions"
            [type]="facilityBarChartType">  <!-- Can reuse barChartType -->
          </canvas>
        </div>
      </div>
    </div>
  </div>

  
  <!-- src/app/dashboard/dashboard.component.html -->
<div class="container py-4"  >
  <!-- ... other HTML ... -->

  <div class="dashboard-container">
    <div class="chart-card">
      <div class="chart-header">
        <label for="talukaSelectLeft">तालुका निवडा:</label>
        <select id="talukaSelectLeft" [(ngModel)]="selectedTalukaLeft" (ngModelChange)="onTalukaChange()">
          <option *ngFor="let taluka of talukaOptions" [value]="taluka">{{ taluka }}</option>
        </select>
      </div>
      <h3 class="chart-title">अंगणवाडी इमारत प्रकार: सर्व तालुके</h3>
      <div class="chart-wrapper">
       <ngx-charts-bar-vertical
  [results]="barChartData"
  [legend]="true"
  [legendPosition]="legendPosition"
  [xAxis]="true"
  [yAxis]="true">
</ngx-charts-bar-vertical>
      </div>
    </div>

    <div class="chart-card">
      <div class="chart-header " style="margin-top: 80px;">
        <label for="talukaSelectRight">तालुका निवडा:</label>
        <select id="talukaSelectRight" [(ngModel)]="selectedTalukaRight" (ngModelChange)="onTalukaChange()">
          <option *ngFor="let taluka of talukaOptions" [value]="taluka">{{ taluka }}</option>
        </select>
      </div>
      <h3 class="chart-title"> अंगणवाडी बालक</h3>
      <div class="chart-wrapper">
     <ngx-charts-pie-chart
  [results]="pieChartData"अंगणवाडी
  [legend]="false"
  [legendPosition]="legendPosition"
  [labels]="true"
  [doughnut]="false">
</ngx-charts-pie-chart>
      </div>
    </div>
  </div>
</div> 

